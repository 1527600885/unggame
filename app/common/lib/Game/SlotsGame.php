<?php


namespace app\common\lib\Game;


class SlotsGame
{
    protected $goodsList = [
        1 => 5,//城堡
        2 => 9,//苹果
        3 => 10,//任意
        4 => 11,
        5 => 12,
        6 => 13,
        7 => 14,
        8 => 15,
        9 => 20,
        10 => 20,
        11 => 20,
        12 => 20
    ];
    protected $win_lines = [
        1 => [
            [0, 0], [1, 0], [2, 0], [3, 0], [4, 0]
        ],
        2 => [
            [0, 3], [1, 3], [2, 3], [3, 3], [4, 3]
        ],
        3 => [
            [0, 1], [1, 1], [2, 1], [3, 1], [4, 1]
        ],
        4 => [
            [0, 0], [1, 1], [2, 2], [3, 1], [4, 0]
        ],
        5 => [
            [0, 3], [1, 2], [2, 1], [3, 2], [4, 3]
        ],
        6 => [
            [0, 2], [1, 1], [2, 0], [3, 1], [4, 2],
        ],
        7 => [
            [0, 1], [1, 2], [2, 3], [3, 2], [4, 3]
        ],
        8 => [
            [0, 0], [1, 1], [2, 0], [3, 1], [4, 0]
        ],
        9 => [
            [0, 3], [1, 2], [2, 3], [3, 2], [4, 3]
        ],
        10 => [
            [0, 1], [1, 0], [2, 1], [3, 0], [4, 1]
        ],
        11 => [
            [0, 2], [1, 3], [2, 2], [3, 3], [4, 2]
        ],
        12 => [
            [0, 1], [1, 2], [2, 1], [3, 2], [4, 1]
        ],
        13 => [
            [0, 2], [1, 1], [2, 2], [3, 1], [4, 2]
        ],
        14 => [
            [0, 0], [1, 2], [2, 1], [3, 1], [4, 0]
        ],
        15 => [
            [0, 3], [1, 2], [2, 2], [3, 2], [4, 3]
        ],
        16 => [
            [0, 1], [1, 0], [2, 0], [3, 0], [4, 1]
        ],
        17 => [
            [0, 2], [1, 3], [2, 3], [3, 3], [4, 2]
        ],
        18 => [
            [0, 1], [1, 2], [2, 2], [3, 2], [4, 1]
        ],
        19 => [
            [0, 3], [1, 2], [2, 2], [3, 2], [4, 3]
        ],
        20 => [
            [0, 0], [1, 0], [2, 1], [3, 0], [4, 0]
        ],
        21 => [
            [0, 3], [1, 3], [2, 2], [3, 3], [4, 3]
        ],
        22 => [
            [0, 1], [1, 1], [2, 0], [3, 1], [4, 1]
        ],
        23 => [
            [0, 2], [1, 2], [2, 3], [3, 2], [4, 2]
        ],
        24 => [
            [0, 1], [1, 1], [2, 2], [3, 1], [4, 1]
        ]

    ];

    public function getlists()
    {
        $data = [];
        $count = 0;
        foreach ($this->goodsList as $k => $v) {
            $count += $v;
            $data = array_pad($data, $count, $k);
        }
        shuffle($data);
        $result = [];
        for ($i = 0; $i < 5; $i++) {
            $result[] = array_slice($data, $i * 5, 5);

        }
        return $result;
    }
    //[
    //  {
    //    "amount": 75,
    //    "line": 5,
    //    "occurrences": 3,
    //    "positions": [
    //      [
    //        0,
    //        0
    //      ],
    //      [
    //        1,
    //        1
    //      ],
    //      [
    //        2,
    //        2
    //      ]
    //    ],
    //    "symbol": 5,
    //    "type": "lb"
    //  }
    //]
    public function getWinLines($result)
    {
        foreach ($this->win_lines as $v)
        {
            $typeList = [];
            $first = "";
            foreach ($v as $vv)
            {
                $type  = $result[$vv[0]][$vv[1]];
                $typeList[] = $type;
                if(!$first && $type >3)
                {
                    $first = $type;
                }
            }
            if($typeList[0] <= 2)
            {
                continue;
            }

        }
    }
}